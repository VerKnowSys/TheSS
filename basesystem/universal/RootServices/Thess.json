{
    "softwareName": "Thess",
    "install": {
        "commands": "sofin get thess",
        "expectOutput": "All done"
    },
    "start": {
        "commands": "

echo '0' > SERVICE_PREFIX/service.pid
homedirs=\"/home\"
test \"$(uname)\" = \"Darwin\" && homedirs=\"/Users\"
for i in ${homedirs}/*; do
    printf \"Checking $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
    if [ -f $i/.autostart ]; then
        username=\"$(basename $i)\"
        mkdir -p $i/Logs/Thess
        chown \"${username}\" $i/Logs/Thess
        printf \"Autostarting user side TheSS for account: $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
        su - \"${username}\" -c \"sofin update&&sofin get thess >> $i/Logs/Thess/service.log 2>&1\"
        su - \"${username}\" -c \"$i/Apps/Thess/exports/svdss -d >> $i/Logs/Thess/service.log 2>&1 &\"
    fi
done
printf 'Finished\n'
",
        "expectOutput": "Finished"
    },
    "stop": {
        "commands": "

homedirs=\"/home\"
test \"$(uname)\" = \"Darwin\" && homedirs=\"/Users\"
for i in ${homedirs}/*; do
    printf \"Checking $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
    if [ -f $i/.autostart ]; then
        username=\"$(basename $i)\"
        printf \"Stopping user side TheSS for account: $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
        svddw $(cat $i/.${username}.pid)
    fi
done

rm -f SERVICE_PREFIX/service.pid
"
    },
    "babySitter": {
        "commands": "

homedirs=\"/home\"
test \"$(uname)\" = \"Darwin\" && homedirs=\"/Users\"
state=\"OK\"
for i in ${homedirs}/*; do
    printf \"Checking $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
    if [ -f $i/.autostart ]; then
        username=\"$(basename $i)\"
        printf \"Testing user side TheSS for account: $i\n\" >> SERVICE_PREFIX/service.log 2> /dev/null
        kill -0 $(cat $i/.${username}.pid) || state=\"${state}+F\"
    fi
done
printf \"Result:${state}\n\"
",
        "expectOutput": "Result:OK",
        "expectOutputTimeout": 30
    }
}