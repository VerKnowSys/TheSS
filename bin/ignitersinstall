#!/bin/sh

# case when launching it from source repository
thess_source_dir="$(pwd)"

if [ ! -d "$(pwd)/basesystem" ]; then
    thess_source_dir="$HOME/Apps/Thess"
    if [ ! -d "${thess_source_dir}/basesystem" ]; then
        thess_source_dir="/Software/Thess"
        if [ ! -d "${thess_source_dir}/basesystem" ]; then
            printf "FATAL: Couldn't find igniters source directory!\n"
            exit 1
        fi
    fi
fi

default_root_igniters_dir="/SystemUsers/Igniters/Services"
default_igniters_dir="/Common/Igniters/Services"
test_igniters_dir="/Common/Igniters/TestServices"

if [ ! -d "${default_root_igniters_dir}" ]; then
    mkdir -p "${default_root_igniters_dir}"
else
    printf "Root Igniters directory exists."
fi

if [ ! -d "${default_igniters_dir}" ]; then
    mkdir -p "${default_igniters_dir}"
else
    printf "Igniters directory exists."
fi

echo "Installing Service Igniters to ${default_igniters_dir}"
cp -vr ${thess_source_dir}/basesystem/universal/Default* ${default_igniters_dir}/../
cp -vr ${thess_source_dir}/basesystem/universal/Services/* ${default_igniters_dir}/

echo "Installing Root Service Igniters to ${default_root_igniters_dir}"
cp -vr ${thess_source_dir}/basesystem/universal/RootServices/* ${default_root_igniters_dir}/

echo "Installing Root Test Service Igniters to ${default_igniters_dir}"
cp -vr ${thess_source_dir}/basesystem/universal/TestServices/* ${default_igniters_dir}/

echo "Done."
