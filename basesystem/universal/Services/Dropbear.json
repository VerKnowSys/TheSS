{
    "softwareName": "Dropbear",
    "install": {
        "commands": "sofin get dropbear",
        "expectOutput": "All done"
    },
    "start": {
        "commands": "
printf 'Launching Dropbear\n' >> SERVICE_PREFIX/service.log 2>&1
mkdir -p $HOME/.ssh > /dev/null 2>&1
test ! -f $HOME/.ssh/hostkey.dropbear && dropbearkey -t rsa -f $HOME/.ssh/id_rsa.dropbear >> SERVICE_PREFIX/service.log 2>&1
if [ ! -f $HOME/.ssh/id_rsa.dropbear ]; then
    printf 'Generating user private key and updating local authorized_keys.\n' >> SERVICE_PREFIX/service.log 2>&1
    dropbearkey -t rsa -f $HOME/.ssh/id_rsa.dropbear
    dropbearkey -y -f $HOME/.ssh/id_rsa.dropbear | grep ssh-rsa >> $HOME/.ssh/authorized_keys
fi
SERVICE_ROOT/exports/dropbear -F -E -P SERVICE_PREFIX/service.pid -K 35 -p $(sofin port Dropbear) -r $HOME/.ssh/hostkey.dropbear -s -g -W 524288 2>> SERVICE_PREFIX/service.log &
test \"$?\" = \"0\" && printf 'Dropbear started\n' >> SERVICE_PREFIX/service.log 2>&1
"   }
}
