{
    "softwareName": "Redis",
    "watchPort": false,
    "autoStart": true,
    "schedulerActions": [
        {
            "cronEntry": "*/50 * * * * ?",
            "commands": "test -e SERVICE_PREFIX/database/database.rdf && cp SERVICE_PREFIX/database/database.rdf SERVICE_PREFIX/database/database.rdf-$(date +'%Y-%m-%d--%H%M').backup"
        }
    ],
    "install": {
        "commands": "sofin get redis",
        "expectOutput": "All done"
    },
    "start": {
        "commands": "
printf 'Launching Redis\n' >> SERVICE_PREFIX/service.log 2>&1
test ! -d SERVICE_PREFIX/database && mkdir -p SERVICE_PREFIX/database
SERVICE_ROOT/exports/redis-server SERVICE_PREFIX/service.conf
"
    },
    "validate": {
        "commands": "
test ! -f SERVICE_PREFIX/service.conf && printf \"
# Default Redis service configuration for UNIX sockets
unixsocket SERVICE_PREFIX/service.sock
port 0
pidfile SERVICE_PREFIX/service.pid
dir SERVICE_PREFIX/database
dbfilename database.rdf
daemonize yes
rdbcompression yes
save 900 1
save 300 10
save 60 10000
appendonly no
appendfsync everysec
activerehashing yes
loglevel notice
logfile SERVICE_PREFIX/service.log\" > SERVICE_PREFIX/service.conf
"
    }
}