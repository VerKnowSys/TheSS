{
    "softwareName": "Mongodb",
    "domain": "localhost",
    "install": {
        "commands": "sofin get mongodb",
        "expectOutput": "All done"
    },
    "schedulerActions": [
        {
            "cronEntry": "0 8,20 * * * ?",
            "commands": "mongodump --host SERVICE_DOMAIN --port $(cat SERVICE_PREFIX/.ports/0) --out $HOME/Mongo-dumps/$(date +'%Y-%m-%d--%H%M')"
        }
    ],
    "configure": {
        "commands": "
printf \"
bind_ip = SERVICE_ADDRESS
port = $(cat SERVICE_PREFIX/.ports/0)
dbpath = SERVICE_PREFIX/database
logappend = true
logpath = SERVICE_PREFIX/service.log
pidfilepath = SERVICE_PREFIX/service.pid
unixSocketPrefix = SERVICE_PREFIX
fork = true
slave = true
source = # TYPE YOUR SOURCE SERVER HERE
\" > SERVICE_PREFIX/service.conf

"
    },
    "validate": {
        "commands": "
test ! -f SERVICE_PREFIX/database && mkdir -p SERVICE_PREFIX/database && chmod 700 SERVICE_PREFIX/database
"
    },
    "start": {
        "commands": "
printf 'Launching Mongodb\n' >> SERVICE_PREFIX/service.log 2>&1
SERVICE_ROOT/exports/mongod -f SERVICE_PREFIX/service.conf
"
    }
}
