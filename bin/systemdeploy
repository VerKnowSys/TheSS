#!/bin/sh

printf "Loading Sofin environment\n"
if [ "$(id -u)" = "0" ]; then
    . /etc/profile_sofin
else
    . $HOME/.profile
fi

if [ "$(id -u)" != "0" ]; then
    printf "ERROR: This script must be run as root!\n"
    exit 1
fi

if [ ! -d "$(pwd)/bin" ]; then
    printf "ERROR: This script must be run in TheSS root directory!\n"
    exit 1
fi

if [ ! -x "bin/svdss" ] || [ ! -x "bin/svddw" ] || [ ! -x "bin/svdpanel" ]; then
    bin/build
fi

cp -fv bin/svdss /bin/svdss && printf "Successfully installed svdss\n"
cp -fv bin/svddw /bin/svddw && printf "Successfully installed svddw\n"
cp -fv bin/svdpanel /bin/svdpanel && printf "Successfully installed svdpanel\n"

