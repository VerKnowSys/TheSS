#!/bin/sh

readonly JOBS="12"
QMAKE_OPTS=""
MAKE_OPTS="-j${JOBS} -Q -s"
if [ "$(uname)" = "Darwin" ]; then # use system side qt 4.8.x
    export PATH="/usr/bin:/bin:$PATH"
fi

if [ "$(uname)" = "Darwin" ]; then
    MAKE_OPTS="-j${JOBS} --silent"
    QMAKE_OPTS="-spec darwin-g++"
    for i in Notifications TestSS Panel TheSS WAD CoreginxHelper DeathWatch Shell Dispel; do
        qmake ${QMAKE_OPTS} ${i}.pro
        make ${MAKE_OPTS} clean
    done
else
    for i in Notifications TestSS Panel TheSS WAD CoreginxHelper DeathWatch Shell Dispel; do
        qmake ${QMAKE_OPTS} ${i}.pro
        make ${MAKE_OPTS} clean
    done
fi

rm -fv src/*.a
