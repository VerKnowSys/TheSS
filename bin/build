#!/bin/sh


build () {
    SYSTEM_NAME="$(uname)"
    OPTS=""
    case "${SYSTEM_NAME}" in
        Darwin)
            OPTS="-spec darwin-g++"
            ;;
    esac

    case "$1" in
        panel|svdpanel)
            qmake ${OPTS} Panel.pro
            make && printf "Successfully built svdpanel\n"
            ;;

        ss|svdss)
            qmake ${OPTS} TheSS.pro
            make && printf "Successfully built ss\n"
            ;;

        tests|test)
            qmake ${OPTS} TestSS.pro
            make && printf "Successfully built tests\n"
            ;;

        *)
            qmake ${OPTS} TheSS.pro
            make && printf "Successfully built ss\n"
            qmake ${OPTS} Panel.pro
            make && printf "Successfully built svdpanel\n"
            qmake ${OPTS} TestSS.pro
            make && printf "Successfully built tests\n"
            ;;
    esac
}

build "$1"

printf "NOTE: Please run as root: bin/ignitersinstall to install default igniters to /Common/Igniters. They're required for ss to run properly!\n"
